# Load environment from shell.nix using direnv's nix integration
use nix

# Add local cargo binary directory to the PATH
PATH_add target/debug
PATH_add target/release

# Add each day's binary paths to the PATH
PATH_add day01/target/debug
PATH_add day01/target/release
PATH_add day02/target/debug
PATH_add day02/target/release
PATH_add day03/target/debug
PATH_add day03/target/release

# Set environment variables for the project
export AOC_YEAR=2024
export RUST_BACKTRACE=1

# Detect OS and set appropriate input path
if [ -d "/mnt/c" ]; then
    # WSL/Linux with access to Windows files
    export AOC_INPUT_DIR="/mnt/c/Users/chukw/Downloads/input.txt"
elif [[ "$OSTYPE" == "linux-gnu"* ]]; then
    # Pure Linux
    export AOC_INPUT_DIR="$HOME/Downloads/input.txt"
else
    # Windows (this will be used when running in native Windows with Git Bash or similar)
    export AOC_INPUT_DIR="C:\\Users\\chukw\\Downloads\\input.txt"
fi

# Display a welcome message
echo "ðŸ¦€ Advent of Code 2024 Rust Development Environment Loaded ðŸ¦€"
echo "Run 'make help' to see available commands"
echo "Input file path: $AOC_INPUT_DIR"